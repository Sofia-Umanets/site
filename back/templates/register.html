{% extends "base.html" %}

{% block content %}
<h2>Запись ребёнка в спортшколу</h2>
<form id="regForm" method="POST" action="/register" novalidate>
    <div class="mb-3">
        <label for="child_name" class="form-label">Имя ребёнка</label>
        <input type="text" id="child_name" name="child_name" 
               class="form-control{% if errors.child_name %} is-invalid{% endif %}" 
               value="{{ data.child_name or '' }}" required />
        <div class="invalid-feedback">{{ errors.child_name }}</div>
    </div>
    <div class="mb-3">
        <label for="child_birthdate" class="form-label">Дата рождения ребёнка</label>
        <input type="date" id="child_birthdate" name="child_birthdate" 
               class="form-control{% if errors.child_birthdate %} is-invalid{% endif %}" 
               value="{{ data.child_birthdate or '' }}" required />
        <div class="invalid-feedback">{{ errors.child_birthdate }}</div>
    </div>
    <div class="mb-3">
        <label for="parent_name" class="form-label">Имя родителя</label>
        <input type="text" id="parent_name" name="parent_name" 
               class="form-control{% if errors.parent_name %} is-invalid{% endif %}" 
               value="{{ data.parent_name or '' }}" required />
        <div class="invalid-feedback">{{ errors.parent_name }}</div>
    </div>
    <div class="mb-3">
        <label for="phone" class="form-label">Телефон</label>
        <input type="tel" id="phone" name="phone" 
               class="form-control{% if errors.phone %} is-invalid{% endif %}" 
               value="{{ data.phone or '' }}" required />
        <div class="invalid-feedback">{{ errors.phone }}</div>
    </div>
    <div class="mb-3">
        <label for="email" class="form-label">Почта</label>
        <input type="email" id="email" name="email" 
               class="form-control{% if errors.email %} is-invalid{% endif %}" 
               value="{{ data.email or '' }}" required />
        <div class="invalid-feedback">{{ errors.email }}</div>
    </div>
    <div class="mb-3">
        <label for="comment" class="form-label">Комментарий</label>
        <textarea id="comment" name="comment" class="form-control">{{ data.comment or '' }}</textarea>
    </div>
    <div class="form-check mb-3">
        <input type="checkbox" id="consent" name="consent" value="true" class="form-check-input{% if errors.consent %} is-invalid{% endif %}" {% if data.consent %}checked{% endif %} required />
        <label for="consent" class="form-check-label">Согласие на обработку персональных данных</label>
        <div class="invalid-feedback">{{ errors.consent }}</div>
    </div>
    <button type="submit" class="btn btn-primary">Отправить</button>
</form>

<div id="result" class="mt-3"></div>

<script defer>
document.addEventListener("DOMContentLoaded", () => {
    const form = document.getElementById("regForm");
    if (form) initForm(form, "POST");
});
</script>
{% endblock %}